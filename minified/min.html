<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="logo.png" type="image/gif" sizes="16x16">
    <script src="script.js"></script>
    <title> GDLF </title>
</head>
<body>
  <style>
:root {
  --light-brown: #e8b973;
  --dark-brown: #b27f31;
  --grey: #9c9c9c;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  font-size: 18px;
  font-family: Verdana, Geneva, Tahoma, sans-serif;
}

html {
  background-color: #878787;
  overflow-x: hidden;
}

body {
  width: 1200px;
  max-width: 100vw;
  min-height: 100vh;
  margin: 0 auto;
  text-align: center;
  background-color: #9c9c9c;
}

span {
  display: block;
  height: 24px;
}

input {
  width: 85%;
  height: 40px;
  padding-left: 12px;
  border-radius: 12px;
}

button {
  position: absolute;
  cursor: pointer;
  height: 40px;
  border-radius: 12px;
  margin-left: 12px;
}

.small {
  width: 58%;
}

.info {
  padding: 12px;
  border-radius: 12px;
  border: 2px solid #9c9c9c;
  background-color: #ebebeb;
}

.row, .info {
  margin-top: 12px;
}

.link {
  position: absolute;
  cursor: pointer;
  height: 40px;
  border-radius: 20px;
  margin-left: calc(min(120px, 10%));
}

button:hover, .link:hover {
  background-color: rgb(255, 155, 4);
}

.title {
  font-size: 36px;
}

.subtitle {
  font-size: 24px;
}

.title, section {
  width: 80%;
  margin: 0 auto 24px;
  padding: 24px;
  border-radius: 24px;
  border: 4px solid var(--dark-brown);
  background-color: #e8b973;
}

b {
  cursor: pointer;
}

#output {
  background-color: #c8c8c8;
}

#status {
  margin-top: 12px;
}

#pointer {
  margin-bottom: -36px;
}

#pointer * {
  margin: 0 auto;
}

#triangle {
  width: 0;
  height: 0;
  border-left: 60px solid transparent;
  border-right: 60px solid transparent;  
  border-top: 60px solid var(--dark-brown);
  position: relative;
  top: -6px;
  right: 4px;
}

#triangle-2 {
  width: 0;
  height: 0;
  border-left: 60px solid transparent;
  border-right: 60px solid transparent;  
  border-top: 60px solid var(--light-brown);
  position: relative;
  top: -66px;
  left: 4px;
}

#box {
  width: 60px;
  height: 60px;
  background-color: var(--light-brown);
  border-left: 6px solid var(--dark-brown);
}

#box-2 {
  width: 8px;
  height: 6px;
  background-color: var(--dark-brown);
  position: relative;
  top: 54px;
}

@media screen and (max-width: 1100px) {
  .title, section {
    width: 90%;
  }
}

@media screen and (max-width: 900px) {
  a {
    display: block;
    position: inherit;
    margin: 8px auto;
  }

  .link {
    margin: 0;
  }

  .title {
    padding-bottom: 60px;
  }

  #instruct p {
    width: 90%;
  }
}

@media screen and (max-width: 500px) {
  button, #arrow {
    display: block;
    position: inherit;
    margin: 8px auto;
  }
}
  </style>
  <script>
// Convert input link to output link
// Updates output text and status text
function convert() {
  let input = document.getElementById("input").value;
  let id = (input.split("file/d/")[1] ? 
    (input.split("file/d/")[1].split("/view?")[0] ? 
      input.split("file/d/")[1].split("/view?")[0] : 
      null) : 
    null
  );
  let output = document.getElementById("output");
  let link = id ? "https://drive.google.com/uc?id=" + id : '';
  output.value = link; 
  output.style.backgroundColor = (id ? 'white' : '#c8c8c8')

  let status = document.getElementById("status");
  status.innerText = (id ? 'Successfully converted' : 
    (input ? 'Invalid link!' : '<Please paste your link above>')
  );
  status.style.color = (id ? 'green' : 
    (input ? 'red' : 'black')
  );
}

// Copies converted link to user clipboard
function copy() {
  let output = document.getElementById("output").value;
  navigator.clipboard.writeText(output);
}

// Clears the input field
function del() {
  document.getElementById("input").value = '';
  convert();
}

// Toggles instruction text
function toggle(section, button) {
  let subtext = document.getElementById(section);
  subtext.hidden = !subtext.hidden;
  let arrow = document.getElementById(button);
  arrow.innerHTML = `&#${arrow.dataset.on}`;
  arrow.dataset.on = 19310 - arrow.dataset.on;
}
  </script>
  <span></span>
  <p class="title"> 
      Google Drive Link Formatter
      <a href="https://github.com/blloop/gd-link-formatter" target="_blank"><img class="link" src="github.svg"></a>
  </p>
  <div class="formatter">
      <section>
          <p class="subtitle"> &lpar;1&rpar; Paste Your Link Here </p>
          <div class="row">
              <input type="text" id="input" rows="2" oninput="convert()">
              <button onclick="del()"><img id="clear" src="clear.svg"></button>
          </div>    
      </section>
      <div id="pointer">
          <div id="box"></div>
          <div id="box-2"></div>
          <div id="triangle"></div>
          <div id="triangle-2"></div>
      </div>
      <section>
          <p class="subtitle"> &lpar;2&rpar; Get Your New Link Here </p>
          <div class="row">
              <input type="text" id="output" rows="2" readonly>
              <button onclick="copy()"><img id="copy" src="copy.svg"></button>
          </div>            
          <p class="details" id="status"> &lt;Please paste your link above&gt; </p>
      </section>
      <section class="small">
          <p class="subtitle"> How to use this website
              <b id="arrow-1" data-on="9650" onclick="toggle('about', 'arrow-1')">&#9660;</b> 
          </p>
          <div id="about" class="info" hidden>
              <p> Obtain a share link from your Google Drive media (image / video) and copy
                  it to your clipboard. <br><br> Then, paste it into the first line
                  and the converted link will beautomatically  generated in the second line. </p>
          </div>
      </section>
      <section class="small">
          <p class="subtitle"> About this webpage 
              <b id="arrow-2" data-on="9650" onclick="toggle('instruct', 'arrow-2')">&#9660;</b> 
          </p>
          <div id="instruct" class="info" hidden>
              <p> This webpage formats Google Drive links for you so that their contents
                  can be embedded in external websites. <br><br> For example, formatting a link to 
                  a Google Drive Image allows you to link it to your website without
                  it being blocked by CORB. </p>
          </div>
      </section>
    </div>
</body>
</html>
